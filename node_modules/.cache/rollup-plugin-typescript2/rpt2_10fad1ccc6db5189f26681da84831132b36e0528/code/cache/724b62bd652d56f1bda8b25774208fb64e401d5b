{"code":"/****************************************************************************\r\n * Copyright 2021 EPAM Systems\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *    http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n ***************************************************************************/\r\nimport { Vec2, fromItemsFuse, fromTemplateOnAtom, fromTemplateOnBondAction, fromTemplateOnCanvas, getHoverToFuse, getItemsToFuse, FunctionalGroup, SGroup } from 'ketcher-core';\r\nimport utils from '../shared/utils';\r\nclass TemplateTool {\r\n    editor;\r\n    mode;\r\n    template;\r\n    findItems;\r\n    dragCtx;\r\n    constructor(editor, tmpl) {\r\n        this.editor = editor;\r\n        this.mode = tmpl.mode;\r\n        this.editor.selection(null);\r\n        this.template = {\r\n            aid: parseInt(tmpl.aid) || 0,\r\n            bid: parseInt(tmpl.bid) || 0\r\n        };\r\n        const frag = tmpl.struct;\r\n        frag.rescale();\r\n        const xy0 = new Vec2();\r\n        frag.atoms.forEach((atom) => {\r\n            xy0.add_(atom.pp); // eslint-disable-line no-underscore-dangle\r\n        });\r\n        this.template.molecule = frag; // preloaded struct\r\n        this.findItems = [];\r\n        this.template.xy0 = xy0.scaled(1 / (frag.atoms.size || 1)); // template center\r\n        const atom = frag.atoms.get(this.template.aid);\r\n        if (atom) {\r\n            this.template.angle0 = utils.calcAngle(atom.pp, this.template.xy0); // center tilt\r\n            this.findItems.push('atoms');\r\n        }\r\n        const bond = frag.bonds.get(this.template.bid);\r\n        if (bond && this.mode !== 'fg') {\r\n            // template location sign against attachment bond\r\n            this.template.sign = getSign(frag, bond, this.template.xy0);\r\n            this.findItems.push('bonds');\r\n        }\r\n        const sgroup = frag.sgroups.size;\r\n        if (sgroup) {\r\n            this.findItems.push('sgroups');\r\n        }\r\n    }\r\n    mousedown(event) {\r\n        const closestItem = this.editor.findItem(event, [\r\n            'atoms',\r\n            'bonds',\r\n            'sgroups',\r\n            'functionalGroups'\r\n        ]);\r\n        const struct = this.editor.struct();\r\n        const atomResult = [];\r\n        const bondResult = [];\r\n        const sGroupResult = [];\r\n        const result = [];\r\n        const ctab = this.editor.render.ctab;\r\n        const molecule = ctab.molecule;\r\n        const functionalGroups = molecule.functionalGroups;\r\n        if (closestItem &&\r\n            functionalGroups.size &&\r\n            closestItem.map === 'functionalGroups' &&\r\n            FunctionalGroup.isContractedFunctionalGroup(closestItem.id, functionalGroups)) {\r\n            sGroupResult.push(closestItem.id);\r\n        }\r\n        if (closestItem && functionalGroups.size && closestItem.map === 'atoms') {\r\n            const atomId = FunctionalGroup.atomsInFunctionalGroup(functionalGroups, closestItem.id);\r\n            if (atomId !== null) {\r\n                atomResult.push(atomId);\r\n            }\r\n        }\r\n        if (closestItem && functionalGroups.size && closestItem.map === 'bonds') {\r\n            const bondId = FunctionalGroup.bondsInFunctionalGroup(molecule, functionalGroups, closestItem.id);\r\n            if (bondId !== null) {\r\n                bondResult.push(bondId);\r\n            }\r\n        }\r\n        if (sGroupResult.length > 0) {\r\n            for (const id of sGroupResult) {\r\n                if (!result.includes(id))\r\n                    result.push(id);\r\n            }\r\n        }\r\n        if (atomResult.length > 0) {\r\n            for (const id of atomResult) {\r\n                const fgId = FunctionalGroup.findFunctionalGroupByAtom(functionalGroups, id);\r\n                if (fgId !== null && !result.includes(fgId)) {\r\n                    result.push(fgId);\r\n                }\r\n            }\r\n        }\r\n        if (bondResult.length > 0) {\r\n            for (const id of bondResult) {\r\n                const fgId = FunctionalGroup.findFunctionalGroupByBond(molecule, struct.functionalGroups, id);\r\n                if (fgId !== null && !result.includes(fgId)) {\r\n                    result.push(fgId);\r\n                }\r\n            }\r\n        }\r\n        if (result.length) {\r\n            this.editor.event.removeFG.dispatch({ fgIds: result });\r\n            return;\r\n        }\r\n        // eslint-disable-line max-statements\r\n        const editor = this.editor;\r\n        this.editor.hover(null);\r\n        this.dragCtx = {\r\n            xy0: editor.render.page2obj(event),\r\n            item: editor.findItem(event, this.findItems)\r\n        };\r\n        const dragCtx = this.dragCtx;\r\n        const ci = dragCtx.item;\r\n        if (!ci) {\r\n            //  ci.type == 'Canvas'\r\n            delete dragCtx.item;\r\n            return true;\r\n        }\r\n        if (ci.map === 'bonds' && this.mode !== 'fg') {\r\n            // calculate fragment center\r\n            const molecule = ctab.molecule;\r\n            const xy0 = new Vec2();\r\n            const bond = molecule.bonds.get(ci.id);\r\n            const frid = molecule.atoms.get(bond?.begin)?.fragment;\r\n            const frIds = molecule.getFragmentIds(frid);\r\n            let count = 0;\r\n            let loop = molecule.halfBonds.get(bond?.hb1)?.loop;\r\n            if (loop && loop < 0) {\r\n                loop = molecule.halfBonds.get(bond?.hb2)?.loop;\r\n            }\r\n            if (loop && loop >= 0) {\r\n                const loopHbs = molecule.loops.get(loop)?.hbs;\r\n                loopHbs?.forEach((hb) => {\r\n                    const halfBondBegin = molecule.halfBonds.get(hb)?.begin;\r\n                    if (halfBondBegin) {\r\n                        const hbbAtom = molecule.atoms.get(halfBondBegin);\r\n                        if (hbbAtom) {\r\n                            xy0.add_(hbbAtom.pp); // eslint-disable-line no-underscore-dangle, max-len\r\n                            count++;\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n            else {\r\n                frIds.forEach((id) => {\r\n                    const atomById = molecule.atoms.get(id);\r\n                    if (atomById) {\r\n                        xy0.add_(atomById.pp); // eslint-disable-line no-underscore-dangle\r\n                        count++;\r\n                    }\r\n                });\r\n            }\r\n            dragCtx.v0 = xy0.scaled(1 / count);\r\n            const sign = getSign(molecule, bond, dragCtx.v0);\r\n            // calculate default template flip\r\n            dragCtx.sign1 = sign || 1;\r\n            dragCtx.sign2 = this.template.sign;\r\n        }\r\n        return true;\r\n    }\r\n    mousemove(event) {\r\n        const restruct = this.editor.render.ctab;\r\n        if (!this.dragCtx) {\r\n            this.editor.hover(this.editor.findItem(event, this.findItems), null, event);\r\n            return true;\r\n        }\r\n        const dragCtx = this.dragCtx;\r\n        const ci = dragCtx.item;\r\n        let pos0 = null;\r\n        const pos1 = this.editor.render.page2obj(event);\r\n        const struct = restruct.molecule;\r\n        /* moving when attached to bond */\r\n        if (ci && ci.map === 'bonds' && this.mode !== 'fg') {\r\n            const bond = struct.bonds.get(ci.id);\r\n            let sign = getSign(struct, bond, pos1);\r\n            if (dragCtx.sign1 * this.template.sign > 0) {\r\n                sign = -sign;\r\n            }\r\n            if (sign !== dragCtx.sign2 || !dragCtx.action) {\r\n                if (dragCtx.action) {\r\n                    dragCtx.action.perform(restruct);\r\n                } // undo previous action\r\n                dragCtx.sign2 = sign;\r\n                const [action, pasteItems] = fromTemplateOnBondAction(restruct, this.template, ci.id, this.editor.event, dragCtx.sign1 * dragCtx.sign2 > 0, false);\r\n                dragCtx.action = action;\r\n                this.editor.update(dragCtx.action, true);\r\n                dragCtx.mergeItems = getItemsToFuse(this.editor, pasteItems);\r\n                this.editor.hover(getHoverToFuse(dragCtx.mergeItems));\r\n            }\r\n            return true;\r\n        }\r\n        /* end */\r\n        let extraBond = null;\r\n        // calc initial pos and is extra bond needed\r\n        if (!ci) {\r\n            //  ci.type == 'Canvas'\r\n            pos0 = dragCtx.xy0;\r\n        }\r\n        else if (ci.map === 'atoms') {\r\n            pos0 = struct.atoms.get(ci.id)?.pp;\r\n            if (pos0) {\r\n                extraBond = this.mode === 'fg' ? true : Vec2.dist(pos0, pos1) > 1;\r\n            }\r\n        }\r\n        // calc angle\r\n        let angle = utils.calcAngle(pos0, pos1);\r\n        if (!event.ctrlKey) {\r\n            angle = utils.fracAngle(angle, null);\r\n        }\r\n        const degrees = utils.degrees(angle);\r\n        this.editor.event.message.dispatch({ info: degrees + 'ยบ' });\r\n        // check if anything changed since last time\r\n        if (\r\n        // eslint-disable-next-line no-prototype-builtins\r\n        dragCtx.hasOwnProperty('angle') &&\r\n            dragCtx.angle === degrees &&\r\n            // eslint-disable-next-line no-prototype-builtins\r\n            (!dragCtx.hasOwnProperty('extra_bond') ||\r\n                dragCtx.extra_bond === extraBond)) {\r\n            return true;\r\n        }\r\n        // undo previous action\r\n        if (dragCtx.action) {\r\n            dragCtx.action.perform(restruct);\r\n        }\r\n        // create new action\r\n        dragCtx.angle = degrees;\r\n        let action = null;\r\n        let pasteItems;\r\n        if (!ci) {\r\n            // ci.type == 'Canvas'\r\n            ;\r\n            [action, pasteItems] = fromTemplateOnCanvas(restruct, this.template, pos0, angle);\r\n        }\r\n        else if (ci.map === 'atoms') {\r\n            ;\r\n            [action, pasteItems] = fromTemplateOnAtom(restruct, this.template, ci.id, angle, extraBond);\r\n            dragCtx.extra_bond = extraBond;\r\n        }\r\n        dragCtx.action = action;\r\n        this.editor.update(dragCtx.action, true);\r\n        if (this.mode !== 'fg') {\r\n            dragCtx.mergeItems = getItemsToFuse(this.editor, pasteItems);\r\n            this.editor.hover(getHoverToFuse(dragCtx.mergeItems));\r\n        }\r\n        return true;\r\n    }\r\n    mouseup(event) {\r\n        const dragCtx = this.dragCtx;\r\n        if (!dragCtx) {\r\n            return true;\r\n        }\r\n        delete this.dragCtx;\r\n        const restruct = this.editor.render.ctab;\r\n        const struct = restruct.molecule;\r\n        const ci = dragCtx.item;\r\n        /* after moving around bond */\r\n        if (dragCtx.action && ci && ci.map === 'bonds' && this.mode !== 'fg') {\r\n            dragCtx.action.perform(restruct); // revert drag action\r\n            const promise = fromTemplateOnBondAction(restruct, this.template, ci.id, this.editor.event, dragCtx.sign1 * dragCtx.sign2 > 0, true);\r\n            promise.then(([action, pasteItems]) => {\r\n                const mergeItems = getItemsToFuse(this.editor, pasteItems);\r\n                action = fromItemsFuse(restruct, mergeItems).mergeWith(action);\r\n                this.editor.update(action);\r\n            });\r\n            return true;\r\n        }\r\n        /* end */\r\n        let action;\r\n        let pasteItems = null;\r\n        if (SGroup.isSaltOrSolvent(this.template.molecule.name)) {\r\n            addSaltsAndSolventsOnCanvasWithoutMerge(restruct, this.template, dragCtx, this.editor);\r\n            return true;\r\n        }\r\n        if (!dragCtx.action) {\r\n            if (!ci) {\r\n                //  ci.type == 'Canvas'\r\n                ;\r\n                [action, pasteItems] = fromTemplateOnCanvas(restruct, this.template, dragCtx.xy0, 0);\r\n                dragCtx.action = action;\r\n            }\r\n            else if (ci.map === 'atoms') {\r\n                const degree = restruct.atoms.get(ci.id)?.a.neighbors.length;\r\n                let angle;\r\n                let extraBond;\r\n                if (degree && degree > 1) {\r\n                    // common case\r\n                    angle = null;\r\n                    extraBond = true;\r\n                }\r\n                else if (degree === 1) {\r\n                    // on chain end\r\n                    const atom = struct.atoms.get(ci.id);\r\n                    const neiId = atom && struct.halfBonds.get(atom.neighbors[0])?.end;\r\n                    const nei = neiId && struct.atoms.get(neiId);\r\n                    angle = event.ctrlKey\r\n                        ? utils.calcAngle(nei?.pp, atom?.pp)\r\n                        : utils.fracAngle(utils.calcAngle(nei.pp, atom?.pp), null);\r\n                    extraBond = false;\r\n                }\r\n                else {\r\n                    // on single atom\r\n                    angle = 0;\r\n                    extraBond = false;\r\n                }\r\n                ;\r\n                [action, pasteItems] = fromTemplateOnAtom(restruct, this.template, ci.id, angle, extraBond);\r\n                dragCtx.action = action;\r\n            }\r\n            else if (ci.map === 'bonds' && this.mode !== 'fg') {\r\n                const promise = fromTemplateOnBondAction(restruct, this.template, ci.id, this.editor.event, dragCtx.sign1 * dragCtx.sign2 > 0, true);\r\n                promise.then(([action, pasteItems]) => {\r\n                    if (this.mode !== 'fg') {\r\n                        const mergeItems = getItemsToFuse(this.editor, pasteItems);\r\n                        action = fromItemsFuse(restruct, mergeItems).mergeWith(action);\r\n                        this.editor.update(action);\r\n                    }\r\n                });\r\n                return true;\r\n            }\r\n        }\r\n        this.editor.selection(null);\r\n        if (!dragCtx.mergeItems && pasteItems && this.mode !== 'fg') {\r\n            dragCtx.mergeItems = getItemsToFuse(this.editor, pasteItems);\r\n        }\r\n        dragCtx.action = dragCtx.action\r\n            ? fromItemsFuse(restruct, dragCtx.mergeItems).mergeWith(dragCtx.action)\r\n            : fromItemsFuse(restruct, dragCtx.mergeItems);\r\n        this.editor.hover(null);\r\n        const completeAction = dragCtx.action;\r\n        if (completeAction && !completeAction.isDummy()) {\r\n            this.editor.update(completeAction);\r\n        }\r\n        this.editor.event.message.dispatch({\r\n            info: false\r\n        });\r\n        return true;\r\n    }\r\n    cancel(e) {\r\n        this.mouseup(e);\r\n    }\r\n    mouseleave(e) {\r\n        this.mouseup(e);\r\n    }\r\n}\r\nfunction addSaltsAndSolventsOnCanvasWithoutMerge(restruct, template, dragCtx, editor) {\r\n    const [action] = fromTemplateOnCanvas(restruct, template, dragCtx.xy0, 0);\r\n    editor.update(action);\r\n    editor.selection(null);\r\n    editor.hover(null);\r\n    editor.event.message.dispatch({\r\n        info: false\r\n    });\r\n}\r\nfunction getSign(molecule, bond, v) {\r\n    const begin = molecule.atoms.get(bond.begin).pp;\r\n    const end = molecule.atoms.get(bond.end).pp;\r\n    const sign = Vec2.cross(Vec2.diff(begin, end), Vec2.diff(v, end));\r\n    if (sign > 0) {\r\n        return 1;\r\n    }\r\n    if (sign < 0) {\r\n        return -1;\r\n    }\r\n    return 0;\r\n}\r\nexport default TemplateTool;\r\n//# sourceMappingURL=template.js.map","references":["/home/ubuntu/work/4life/ketcher/packages/ketcher-core/dist/index.d.ts","/home/ubuntu/work/4life/ketcher/packages/ketcher-react/src/script/editor/shared/utils.js","/home/ubuntu/work/4life/ketcher/packages/ketcher-react/src/script/editor/Editor.ts"],"map":"{\"version\":3,\"file\":\"template.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../../src/script/editor/tool/template.ts\"],\"names\":[],\"mappings\":\"AAAA;;;;;;;;;;;;;;6EAc6E;AAE7E,OAAO,EACL,IAAI,EACJ,aAAa,EACb,kBAAkB,EAClB,wBAAwB,EACxB,oBAAoB,EACpB,cAAc,EACd,cAAc,EACd,eAAe,EACf,MAAM,EAGP,MAAM,cAAc,CAAA;AAErB,OAAO,KAAK,MAAM,iBAAiB,CAAA;AAGnC,MAAM,YAAY;IAChB,MAAM,CAAQ;IACd,IAAI,CAAK;IACT,QAAQ,CAAK;IACb,SAAS,CAAe;IACxB,OAAO,CAAK;IAEZ,YAAY,MAAM,EAAE,IAAI;QACtB,IAAI,CAAC,MAAM,GAAG,MAAM,CAAA;QACpB,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAA;QACrB,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,IAAI,CAAC,CAAA;QAE3B,IAAI,CAAC,QAAQ,GAAG;YACd,GAAG,EAAE,QAAQ,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC;YAC5B,GAAG,EAAE,QAAQ,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC;SAC7B,CAAA;QAED,MAAM,IAAI,GAAG,IAAI,CAAC,MAAM,CAAA;QACxB,IAAI,CAAC,OAAO,EAAE,CAAA;QAEd,MAAM,GAAG,GAAG,IAAI,IAAI,EAAE,CAAA;QACtB,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,IAAI,EAAE,EAAE;YAC1B,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,CAAA,CAAC,2CAA2C;QAC/D,CAAC,CAAC,CAAA;QAEF,IAAI,CAAC,QAAQ,CAAC,QAAQ,GAAG,IAAI,CAAA,CAAC,mBAAmB;QACjD,IAAI,CAAC,SAAS,GAAG,EAAE,CAAA;QACnB,IAAI,CAAC,QAAQ,CAAC,GAAG,GAAG,GAAG,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,IAAI,CAAC,CAAC,CAAC,CAAA,CAAC,kBAAkB;QAE7E,MAAM,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAA;QAC9C,IAAI,IAAI,EAAE;YACR,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,KAAK,CAAC,SAAS,CAAC,IAAI,CAAC,EAAE,EAAE,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAA,CAAC,cAAc;YACjF,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,OAAO,CAAC,CAAA;SAC7B;QAED,MAAM,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAA;QAC9C,IAAI,IAAI,IAAI,IAAI,CAAC,IAAI,KAAK,IAAI,EAAE;YAC9B,iDAAiD;YACjD,IAAI,CAAC,QAAQ,CAAC,IAAI,GAAG,OAAO,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAA;YAC3D,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,OAAO,CAAC,CAAA;SAC7B;QAED,MAAM,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,CAAA;QAChC,IAAI,MAAM,EAAE;YACV,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,SAAS,CAAC,CAAA;SAC/B;IACH,CAAC;IAED,SAAS,CAAC,KAAK;QACb,MAAM,WAAW,GAAG,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,KAAK,EAAE;YAC9C,OAAO;YACP,OAAO;YACP,SAAS;YACT,kBAAkB;SACnB,CAAC,CAAA;QACF,MAAM,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE,CAAA;QACnC,MAAM,UAAU,GAAkB,EAAE,CAAA;QACpC,MAAM,UAAU,GAAkB,EAAE,CAAA;QACpC,MAAM,YAAY,GAAkB,EAAE,CAAA;QACtC,MAAM,MAAM,GAAkB,EAAE,CAAA;QAChC,MAAM,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,CAAA;QACpC,MAAM,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAA;QAC9B,MAAM,gBAAgB,GAAG,QAAQ,CAAC,gBAAgB,CAAA;QAElD,IACE,WAAW;YACX,gBAAgB,CAAC,IAAI;YACrB,WAAW,CAAC,GAAG,KAAK,kBAAkB;YACtC,eAAe,CAAC,2BAA2B,CACzC,WAAW,CAAC,EAAE,EACd,gBAAgB,CACjB,EACD;YACA,YAAY,CAAC,IAAI,CAAC,WAAW,CAAC,EAAE,CAAC,CAAA;SAClC;QAED,IAAI,WAAW,IAAI,gBAAgB,CAAC,IAAI,IAAI,WAAW,CAAC,GAAG,KAAK,OAAO,EAAE;YACvE,MAAM,MAAM,GAAG,eAAe,CAAC,sBAAsB,CACnD,gBAAgB,EAChB,WAAW,CAAC,EAAE,CACf,CAAA;YAED,IAAI,MAAM,KAAK,IAAI,EAAE;gBACnB,UAAU,CAAC,IAAI,CAAC,MAAM,CAAC,CAAA;aACxB;SACF;QAED,IAAI,WAAW,IAAI,gBAAgB,CAAC,IAAI,IAAI,WAAW,CAAC,GAAG,KAAK,OAAO,EAAE;YACvE,MAAM,MAAM,GAAG,eAAe,CAAC,sBAAsB,CACnD,QAAQ,EACR,gBAAgB,EAChB,WAAW,CAAC,EAAE,CACf,CAAA;YAED,IAAI,MAAM,KAAK,IAAI,EAAE;gBACnB,UAAU,CAAC,IAAI,CAAC,MAAM,CAAC,CAAA;aACxB;SACF;QAED,IAAI,YAAY,CAAC,MAAM,GAAG,CAAC,EAAE;YAC3B,KAAK,MAAM,EAAE,IAAI,YAAY,EAAE;gBAC7B,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,EAAE,CAAC;oBAAE,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,CAAA;aAC1C;SACF;QAED,IAAI,UAAU,CAAC,MAAM,GAAG,CAAC,EAAE;YACzB,KAAK,MAAM,EAAE,IAAI,UAAU,EAAE;gBAC3B,MAAM,IAAI,GAAG,eAAe,CAAC,yBAAyB,CACpD,gBAAgB,EAChB,EAAE,CACH,CAAA;gBACD,IAAI,IAAI,KAAK,IAAI,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE;oBAC3C,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAA;iBAClB;aACF;SACF;QAED,IAAI,UAAU,CAAC,MAAM,GAAG,CAAC,EAAE;YACzB,KAAK,MAAM,EAAE,IAAI,UAAU,EAAE;gBAC3B,MAAM,IAAI,GAAG,eAAe,CAAC,yBAAyB,CACpD,QAAQ,EACR,MAAM,CAAC,gBAAgB,EACvB,EAAE,CACH,CAAA;gBACD,IAAI,IAAI,KAAK,IAAI,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE;oBAC3C,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAA;iBAClB;aACF;SACF;QAED,IAAI,MAAM,CAAC,MAAM,EAAE;YACjB,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,QAAQ,CAAC,QAAQ,CAAC,EAAE,KAAK,EAAE,MAAM,EAAE,CAAC,CAAA;YACtD,OAAM;SACP;QACD,qCAAqC;QACrC,MAAM,MAAM,GAAG,IAAI,CAAC,MAAM,CAAA;QAC1B,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC,CAAA;QAEvB,IAAI,CAAC,OAAO,GAAG;YACb,GAAG,EAAE,MAAM,CAAC,MAAM,CAAC,QAAQ,CAAC,KAAK,CAAC;YAClC,IAAI,EAAE,MAAM,CAAC,QAAQ,CAAC,KAAK,EAAE,IAAI,CAAC,SAAS,CAAC;SAC7C,CAAA;QAED,MAAM,OAAO,GAAG,IAAI,CAAC,OAAO,CAAA;QAC5B,MAAM,EAAE,GAAG,OAAO,CAAC,IAAI,CAAA;QAEvB,IAAI,CAAC,EAAE,EAAE;YACP,uBAAuB;YACvB,OAAO,OAAO,CAAC,IAAI,CAAA;YACnB,OAAO,IAAI,CAAA;SACZ;QAED,IAAI,EAAE,CAAC,GAAG,KAAK,OAAO,IAAI,IAAI,CAAC,IAAI,KAAK,IAAI,EAAE;YAC5C,4BAA4B;YAC5B,MAAM,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAA;YAC9B,MAAM,GAAG,GAAG,IAAI,IAAI,EAAE,CAAA;YACtB,MAAM,IAAI,GAAG,QAAQ,CAAC,KAAK,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC,CAAA;YACtC,MAAM,IAAI,GAAG,QAAQ,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,EAAE,KAAe,CAAC,EAAE,QAAQ,CAAA;YAChE,MAAM,KAAK,GAAG,QAAQ,CAAC,cAAc,CAAC,IAAc,CAAC,CAAA;YACrD,IAAI,KAAK,GAAG,CAAC,CAAA;YAEb,IAAI,IAAI,GAAG,QAAQ,CAAC,SAAS,CAAC,GAAG,CAAC,IAAI,EAAE,GAAa,CAAC,EAAE,IAAI,CAAA;YAE5D,IAAI,IAAI,IAAI,IAAI,GAAG,CAAC,EAAE;gBACpB,IAAI,GAAG,QAAQ,CAAC,SAAS,CAAC,GAAG,CAAC,IAAI,EAAE,GAAa,CAAC,EAAE,IAAI,CAAA;aACzD;YAED,IAAI,IAAI,IAAI,IAAI,IAAI,CAAC,EAAE;gBACrB,MAAM,OAAO,GAAG,QAAQ,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,GAAG,CAAA;gBAC7C,OAAO,EAAE,OAAO,CAAC,CAAC,EAAE,EAAE,EAAE;oBACtB,MAAM,aAAa,GAAG,QAAQ,CAAC,SAAS,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,KAAK,CAAA;oBAEvD,IAAI,aAAa,EAAE;wBACjB,MAAM,OAAO,GAAG,QAAQ,CAAC,KAAK,CAAC,GAAG,CAAC,aAAa,CAAC,CAAA;wBAEjD,IAAI,OAAO,EAAE;4BACX,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,CAAA,CAAC,oDAAoD;4BACzE,KAAK,EAAE,CAAA;yBACR;qBACF;gBACH,CAAC,CAAC,CAAA;aACH;iBAAM;gBACL,KAAK,CAAC,OAAO,CAAC,CAAC,EAAE,EAAE,EAAE;oBACnB,MAAM,QAAQ,GAAG,QAAQ,CAAC,KAAK,CAAC,GAAG,CAAC,EAAE,CAAC,CAAA;oBAEvC,IAAI,QAAQ,EAAE;wBACZ,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAA,CAAC,2CAA2C;wBACjE,KAAK,EAAE,CAAA;qBACR;gBACH,CAAC,CAAC,CAAA;aACH;YAED,OAAO,CAAC,EAAE,GAAG,GAAG,CAAC,MAAM,CAAC,CAAC,GAAG,KAAK,CAAC,CAAA;YAElC,MAAM,IAAI,GAAG,OAAO,CAAC,QAAQ,EAAE,IAAI,EAAE,OAAO,CAAC,EAAE,CAAC,CAAA;YAEhD,kCAAkC;YAClC,OAAO,CAAC,KAAK,GAAG,IAAI,IAAI,CAAC,CAAA;YACzB,OAAO,CAAC,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAA;SACnC;QAED,OAAO,IAAI,CAAA;IACb,CAAC;IAED,SAAS,CAAC,KAAK;QACb,MAAM,QAAQ,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,CAAA;QAExC,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE;YACjB,IAAI,CAAC,MAAM,CAAC,KAAK,CACf,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,KAAK,EAAE,IAAI,CAAC,SAAS,CAAC,EAC3C,IAAI,EACJ,KAAK,CACN,CAAA;YACD,OAAO,IAAI,CAAA;SACZ;QAED,MAAM,OAAO,GAAG,IAAI,CAAC,OAAO,CAAA;QAC5B,MAAM,EAAE,GAAG,OAAO,CAAC,IAAI,CAAA;QACvB,IAAI,IAAI,GAA4B,IAAI,CAAA;QACxC,MAAM,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAA;QAC/C,MAAM,MAAM,GAAG,QAAQ,CAAC,QAAQ,CAAA;QAEhC,kCAAkC;QAClC,IAAI,EAAE,IAAI,EAAE,CAAC,GAAG,KAAK,OAAO,IAAI,IAAI,CAAC,IAAI,KAAK,IAAI,EAAE;YAClD,MAAM,IAAI,GAAG,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC,CAAA;YACpC,IAAI,IAAI,GAAG,OAAO,CAAC,MAAM,EAAE,IAAI,EAAE,IAAI,CAAC,CAAA;YAEtC,IAAI,OAAO,CAAC,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,IAAI,GAAG,CAAC,EAAE;gBAC1C,IAAI,GAAG,CAAC,IAAI,CAAA;aACb;YAED,IAAI,IAAI,KAAK,OAAO,CAAC,KAAK,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE;gBAC7C,IAAI,OAAO,CAAC,MAAM,EAAE;oBAClB,OAAO,CAAC,MAAM,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAA;iBACjC,CAAC,uBAAuB;gBAEzB,OAAO,CAAC,KAAK,GAAG,IAAI,CAAA;gBACpB,MAAM,CAAC,MAAM,EAAE,UAAU,CAAC,GAAG,wBAAwB,CACnD,QAAQ,EACR,IAAI,CAAC,QAAQ,EACb,EAAE,CAAC,EAAE,EACL,IAAI,CAAC,MAAM,CAAC,KAAK,EACjB,OAAO,CAAC,KAAK,GAAG,OAAO,CAAC,KAAK,GAAG,CAAC,EACjC,KAAK,CACQ,CAAA;gBAEf,OAAO,CAAC,MAAM,GAAG,MAAM,CAAA;gBACvB,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,OAAO,CAAC,MAAM,EAAE,IAAI,CAAC,CAAA;gBAExC,OAAO,CAAC,UAAU,GAAG,cAAc,CAAC,IAAI,CAAC,MAAM,EAAE,UAAU,CAAC,CAAA;gBAC5D,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,cAAc,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC,CAAA;aACtD;YACD,OAAO,IAAI,CAAA;SACZ;QACD,SAAS;QAET,IAAI,SAAS,GAAmB,IAAI,CAAA;QACpC,4CAA4C;QAC5C,IAAI,CAAC,EAAE,EAAE;YACP,uBAAuB;YACvB,IAAI,GAAG,OAAO,CAAC,GAAG,CAAA;SACnB;aAAM,IAAI,EAAE,CAAC,GAAG,KAAK,OAAO,EAAE;YAC7B,IAAI,GAAG,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,CAAA;YAElC,IAAI,IAAI,EAAE;gBACR,SAAS,GAAG,IAAI,CAAC,IAAI,KAAK,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,GAAG,CAAC,CAAA;aAClE;SACF;QAED,aAAa;QACb,IAAI,KAAK,GAAG,KAAK,CAAC,SAAS,CAAC,IAAI,EAAE,IAAI,CAAC,CAAA;QAEvC,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE;YAClB,KAAK,GAAG,KAAK,CAAC,SAAS,CAAC,KAAK,EAAE,IAAI,CAAC,CAAA;SACrC;QAED,MAAM,OAAO,GAAG,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,CAAA;QACpC,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,OAAO,CAAC,QAAQ,CAAC,EAAE,IAAI,EAAE,OAAO,GAAG,GAAG,EAAE,CAAC,CAAA;QAE3D,4CAA4C;QAC5C;QACE,iDAAiD;QACjD,OAAO,CAAC,cAAc,CAAC,OAAO,CAAC;YAC/B,OAAO,CAAC,KAAK,KAAK,OAAO;YACzB,iDAAiD;YACjD,CAAC,CAAC,OAAO,CAAC,cAAc,CAAC,YAAY,CAAC;gBACpC,OAAO,CAAC,UAAU,KAAK,SAAS,CAAC,EACnC;YACA,OAAO,IAAI,CAAA;SACZ;QAED,uBAAuB;QACvB,IAAI,OAAO,CAAC,MAAM,EAAE;YAClB,OAAO,CAAC,MAAM,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAA;SACjC;QAED,oBAAoB;QACpB,OAAO,CAAC,KAAK,GAAG,OAAO,CAAA;QACvB,IAAI,MAAM,GAAG,IAAI,CAAA;QACjB,IAAI,UAAU,CAAA;QAEd,IAAI,CAAC,EAAE,EAAE;YACP,sBAAsB;YACtB,CAAC;YAAA,CAAC,MAAM,EAAE,UAAU,CAAC,GAAG,oBAAoB,CAC1C,QAAQ,EACR,IAAI,CAAC,QAAQ,EACb,IAAI,EACJ,KAAK,CACN,CAAA;SACF;aAAM,IAAI,EAAE,CAAC,GAAG,KAAK,OAAO,EAAE;YAC7B,CAAC;YAAA,CAAC,MAAM,EAAE,UAAU,CAAC,GAAG,kBAAkB,CACxC,QAAQ,EACR,IAAI,CAAC,QAAQ,EACb,EAAE,CAAC,EAAE,EACL,KAAK,EACL,SAAS,CACV,CAAA;YACD,OAAO,CAAC,UAAU,GAAG,SAAS,CAAA;SAC/B;QACD,OAAO,CAAC,MAAM,GAAG,MAAM,CAAA;QAEvB,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,OAAO,CAAC,MAAM,EAAE,IAAI,CAAC,CAAA;QAExC,IAAI,IAAI,CAAC,IAAI,KAAK,IAAI,EAAE;YACtB,OAAO,CAAC,UAAU,GAAG,cAAc,CAAC,IAAI,CAAC,MAAM,EAAE,UAAU,CAAC,CAAA;YAC5D,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,cAAc,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC,CAAA;SACtD;QAED,OAAO,IAAI,CAAA;IACb,CAAC;IAED,OAAO,CAAC,KAAK;QACX,MAAM,OAAO,GAAG,IAAI,CAAC,OAAO,CAAA;QAE5B,IAAI,CAAC,OAAO,EAAE;YACZ,OAAO,IAAI,CAAA;SACZ;QAED,OAAO,IAAI,CAAC,OAAO,CAAA;QAEnB,MAAM,QAAQ,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,CAAA;QACxC,MAAM,MAAM,GAAG,QAAQ,CAAC,QAAQ,CAAA;QAChC,MAAM,EAAE,GAAG,OAAO,CAAC,IAAI,CAAA;QAEvB,8BAA8B;QAC9B,IAAI,OAAO,CAAC,MAAM,IAAI,EAAE,IAAI,EAAE,CAAC,GAAG,KAAK,OAAO,IAAI,IAAI,CAAC,IAAI,KAAK,IAAI,EAAE;YACpE,OAAO,CAAC,MAAM,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAA,CAAC,qBAAqB;YAEtD,MAAM,OAAO,GAAG,wBAAwB,CACtC,QAAQ,EACR,IAAI,CAAC,QAAQ,EACb,EAAE,CAAC,EAAE,EACL,IAAI,CAAC,MAAM,CAAC,KAAK,EACjB,OAAO,CAAC,KAAK,GAAG,OAAO,CAAC,KAAK,GAAG,CAAC,EACjC,IAAI,CACW,CAAA;YAEjB,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,MAAM,EAAE,UAAU,CAAC,EAAE,EAAE;gBACpC,MAAM,UAAU,GAAG,cAAc,CAAC,IAAI,CAAC,MAAM,EAAE,UAAU,CAAC,CAAA;gBAC1D,MAAM,GAAG,aAAa,CAAC,QAAQ,EAAE,UAAU,CAAC,CAAC,SAAS,CAAC,MAAM,CAAC,CAAA;gBAC9D,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,CAAA;YAC5B,CAAC,CAAC,CAAA;YACF,OAAO,IAAI,CAAA;SACZ;QACD,SAAS;QAET,IAAI,MAAM,CAAA;QACV,IAAI,UAAU,GAAG,IAAI,CAAA;QAErB,IAAI,MAAM,CAAC,eAAe,CAAC,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE;YACvD,uCAAuC,CACrC,QAAQ,EACR,IAAI,CAAC,QAAQ,EACb,OAAO,EACP,IAAI,CAAC,MAAM,CACZ,CAAA;YACD,OAAO,IAAI,CAAA;SACZ;QAED,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE;YACnB,IAAI,CAAC,EAAE,EAAE;gBACP,uBAAuB;gBACvB,CAAC;gBAAA,CAAC,MAAM,EAAE,UAAU,CAAC,GAAG,oBAAoB,CAC1C,QAAQ,EACR,IAAI,CAAC,QAAQ,EACb,OAAO,CAAC,GAAG,EACX,CAAC,CACF,CAAA;gBACD,OAAO,CAAC,MAAM,GAAG,MAAM,CAAA;aACxB;iBAAM,IAAI,EAAE,CAAC,GAAG,KAAK,OAAO,EAAE;gBAC7B,MAAM,MAAM,GAAG,QAAQ,CAAC,KAAK,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,SAAS,CAAC,MAAM,CAAA;gBAC5D,IAAI,KAAK,CAAA;gBACT,IAAI,SAAS,CAAA;gBAEb,IAAI,MAAM,IAAI,MAAM,GAAG,CAAC,EAAE;oBACxB,cAAc;oBACd,KAAK,GAAG,IAAI,CAAA;oBACZ,SAAS,GAAG,IAAI,CAAA;iBACjB;qBAAM,IAAI,MAAM,KAAK,CAAC,EAAE;oBACvB,eAAe;oBACf,MAAM,IAAI,GAAG,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC,CAAA;oBACpC,MAAM,KAAK,GAAG,IAAI,IAAI,MAAM,CAAC,SAAS,CAAC,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,EAAE,GAAG,CAAA;oBAClE,MAAM,GAAG,GAAQ,KAAK,IAAI,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,KAAK,CAAC,CAAA;oBAEjD,KAAK,GAAG,KAAK,CAAC,OAAO;wBACnB,CAAC,CAAC,KAAK,CAAC,SAAS,CAAC,GAAG,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,CAAC;wBACpC,CAAC,CAAC,KAAK,CAAC,SAAS,CAAC,KAAK,CAAC,SAAS,CAAC,GAAG,CAAC,EAAE,EAAE,IAAI,EAAE,EAAE,CAAC,EAAE,IAAI,CAAC,CAAA;oBAC5D,SAAS,GAAG,KAAK,CAAA;iBAClB;qBAAM;oBACL,iBAAiB;oBACjB,KAAK,GAAG,CAAC,CAAA;oBACT,SAAS,GAAG,KAAK,CAAA;iBAClB;gBAED,CAAC;gBAAA,CAAC,MAAM,EAAE,UAAU,CAAC,GAAG,kBAAkB,CACxC,QAAQ,EACR,IAAI,CAAC,QAAQ,EACb,EAAE,CAAC,EAAE,EACL,KAAK,EACL,SAAS,CACV,CAAA;gBACD,OAAO,CAAC,MAAM,GAAG,MAAM,CAAA;aACxB;iBAAM,IAAI,EAAE,CAAC,GAAG,KAAK,OAAO,IAAI,IAAI,CAAC,IAAI,KAAK,IAAI,EAAE;gBACnD,MAAM,OAAO,GAAG,wBAAwB,CACtC,QAAQ,EACR,IAAI,CAAC,QAAQ,EACb,EAAE,CAAC,EAAE,EACL,IAAI,CAAC,MAAM,CAAC,KAAK,EACjB,OAAO,CAAC,KAAK,GAAG,OAAO,CAAC,KAAK,GAAG,CAAC,EACjC,IAAI,CACW,CAAA;gBAEjB,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,MAAM,EAAE,UAAU,CAAC,EAAE,EAAE;oBACpC,IAAI,IAAI,CAAC,IAAI,KAAK,IAAI,EAAE;wBACtB,MAAM,UAAU,GAAG,cAAc,CAAC,IAAI,CAAC,MAAM,EAAE,UAAU,CAAC,CAAA;wBAC1D,MAAM,GAAG,aAAa,CAAC,QAAQ,EAAE,UAAU,CAAC,CAAC,SAAS,CAAC,MAAM,CAAC,CAAA;wBAC9D,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,CAAA;qBAC3B;gBACH,CAAC,CAAC,CAAA;gBAEF,OAAO,IAAI,CAAA;aACZ;SACF;QAED,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,IAAI,CAAC,CAAA;QAE3B,IAAI,CAAC,OAAO,CAAC,UAAU,IAAI,UAAU,IAAI,IAAI,CAAC,IAAI,KAAK,IAAI,EAAE;YAC3D,OAAO,CAAC,UAAU,GAAG,cAAc,CAAC,IAAI,CAAC,MAAM,EAAE,UAAU,CAAC,CAAA;SAC7D;QACD,OAAO,CAAC,MAAM,GAAG,OAAO,CAAC,MAAM;YAC7B,CAAC,CAAC,aAAa,CAAC,QAAQ,EAAE,OAAO,CAAC,UAAU,CAAC,CAAC,SAAS,CAAC,OAAO,CAAC,MAAM,CAAC;YACvE,CAAC,CAAC,aAAa,CAAC,QAAQ,EAAE,OAAO,CAAC,UAAU,CAAC,CAAA;QAE/C,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC,CAAA;QACvB,MAAM,cAAc,GAAG,OAAO,CAAC,MAAM,CAAA;QACrC,IAAI,cAAc,IAAI,CAAC,cAAc,CAAC,OAAO,EAAE,EAAE;YAC/C,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,cAAc,CAAC,CAAA;SACnC;QACD,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,OAAO,CAAC,QAAQ,CAAC;YACjC,IAAI,EAAE,KAAK;SACZ,CAAC,CAAA;QAEF,OAAO,IAAI,CAAA;IACb,CAAC;IAED,MAAM,CAAC,CAAC;QACN,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAA;IACjB,CAAC;IAED,UAAU,CAAC,CAAC;QACV,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAA;IACjB,CAAC;CACF;AAED,SAAS,uCAAuC,CAC9C,QAAkB,EAClB,QAAgB,EAChB,OAAO,EACP,MAAc;IAEd,MAAM,CAAC,MAAM,CAAC,GAAG,oBAAoB,CAAC,QAAQ,EAAE,QAAQ,EAAE,OAAO,CAAC,GAAG,EAAE,CAAC,CAAC,CAAA;IACzE,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,CAAA;IACrB,MAAM,CAAC,SAAS,CAAC,IAAI,CAAC,CAAA;IACtB,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC,CAAA;IAClB,MAAM,CAAC,KAAK,CAAC,OAAO,CAAC,QAAQ,CAAC;QAC5B,IAAI,EAAE,KAAK;KACZ,CAAC,CAAA;AACJ,CAAC;AAED,SAAS,OAAO,CAAC,QAAQ,EAAE,IAAI,EAAE,CAAC;IAChC,MAAM,KAAK,GAAG,QAAQ,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,EAAE,CAAA;IAC/C,MAAM,GAAG,GAAG,QAAQ,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,CAAA;IAE3C,MAAM,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE,GAAG,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,CAAA;IAEjE,IAAI,IAAI,GAAG,CAAC,EAAE;QACZ,OAAO,CAAC,CAAA;KACT;IAED,IAAI,IAAI,GAAG,CAAC,EAAE;QACZ,OAAO,CAAC,CAAC,CAAA;KACV;IAED,OAAO,CAAC,CAAA;AACV,CAAC;AAED,eAAe,YAAY,CAAA\"}","dts":{"name":"/home/ubuntu/work/4life/ketcher/packages/ketcher-react/node_modules/.cache/rollup-plugin-typescript2/placeholder/script/editor/tool/template.d.ts","writeByteOrderMark":false,"text":"/****************************************************************************\r\n * Copyright 2021 EPAM Systems\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *    http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n ***************************************************************************/\r\nimport Editor from '../Editor';\r\ndeclare class TemplateTool {\r\n    editor: Editor;\r\n    mode: any;\r\n    template: any;\r\n    findItems: Array<string>;\r\n    dragCtx: any;\r\n    constructor(editor: any, tmpl: any);\r\n    mousedown(event: any): true | undefined;\r\n    mousemove(event: any): boolean;\r\n    mouseup(event: any): boolean;\r\n    cancel(e: any): void;\r\n    mouseleave(e: any): void;\r\n}\r\nexport default TemplateTool;\r\n"}}
